<!DOCTYPE html>
<html>
<head></head>
<body>
<h3>Asynchronous Programming in  JavaScript</h3>
	<hr/> 
	
	<button  onclick="fn_getData()">Get Data </button>
	<br/><br/>
	<table  id="tbl1"  border="1" style="padding:30px; width:100%;">
    </table>
	 
	 
	<script>	 
	
		var tblObj = document.getElementById("tbl1");
		
		
	function fn_getData()
	{ 
		let url = "https://www.w3schools.com/angular/customers.php";
		
		fetch(url).then(  (response)  => 
		{
			response.json().then(  (resData)  =>  
			{ 
					displayData(resData.records);
			});
		}).catch((error) => 
		{
				tblObj.innerHTML = "";
				tblObj.innerHTML  +=  "<tr  style='color:red;'>" + error +  "</tr>"
		});

        
	}  
	
	
	function  displayData( dataArray )
	{
					tblObj.innerHTML = "";
                    var str="";
					
					for(let item of dataArray)
					{
						str  +=  "<tr>";
						str  +=  "<td>" + item.Name + "</td>";
						str  +=  "<td>" +  item.City + "</td>";
						str  +=  "<td>" +  item.Country + "</td>";
						str  +=  "</tr>";
					} 

                    tblObj.innerHTML=str;
	}
	
	</script>	 
</body>
</html>
